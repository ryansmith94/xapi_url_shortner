{"version":3,"sources":["BaseHttpRepository.ts"],"names":[],"mappings":";AAAA,IAAY,MAAM,WAAM,QAAQ,CAAC,CAAA;AACjC,IAAY,CAAC,WAAM,GAAG,CAAC,CAAA;AAEvB;IAGE,oBAAmB,QAAQ;QACzB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC3B,CAAC;IAES,4BAAO,GAAjB,UAAkB,IAAI;QACpB,IAAI,QAAQ,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;QACzB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC;QACrC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;QAEvB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI;YACnC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG;YACnB,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC;IAC1B,CAAC;IAES,iCAAY,GAAtB,UAAuB,MAAM,EAAE,QAAQ;QACrC,IAAI,QAAQ,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;QACzB,IAAI,eAAe,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAE9C,EAAE,CAAC,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/B,QAAQ,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,QAAQ,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;QACzC,CAAC;QAED,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC;IAC1B,CAAC;IAES,gCAAW,GAArB,UAAsB,MAAM,EAAE,QAAQ;QACpC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,UAAU,KAAK,EAAE,KAAK;YACrD,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;YACpB,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,KAAU;YAC1B,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,MAAM,CACxC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAC9B,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IACH,iBAAC;AAAD,CA5CA,AA4CC,IAAA;AAED;kBAAe,UAAU,CAAC","file":"BaseHttpRepository.js","sourcesContent":["import * as jquery from 'jquery';\nimport * as q from 'q';\n\nclass Repository {\n  protected endpoint;\n\n  public constructor(endpoint) {\n    this.endpoint = endpoint;\n  }\n\n  protected connect(opts) {\n    var deferred = q.defer();\n    opts.url = opts.url || this.endpoint;\n    opts.dataType = 'json';\n\n    jquery.ajax(opts).done(function (data) {\n      deferred.resolve(data);\n    }).fail(function (err) {\n      deferred.reject(err.responseText);\n    });\n\n    return deferred.promise;\n  }\n\n  protected filterModels(models, filterFn) {\n    var deferred = q.defer();\n    var filtered_models = models.filter(filterFn);\n\n    if (filtered_models.length > 0) {\n      deferred.resolve(filtered_models[0]);\n    } else {\n      deferred.reject(new Error('No model'));\n    }\n\n    return deferred.promise;\n  }\n\n  protected deleteModel(models, filterFn) {\n    return this.filterModels(models, function (model, index) {\n      model.index = index;\n      return filterFn(model, index);\n    }).then(function (model: any) {\n      return models.slice(0, model.index).concat(\n        models.slice(model.index + 1)\n      );\n    });\n  }\n}\n\nexport default Repository;"],"sourceRoot":"/source/"}