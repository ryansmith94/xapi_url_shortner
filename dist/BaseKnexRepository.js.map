{"version":3,"sources":["BaseKnexRepository.ts"],"names":[],"mappings":";AAAA,IAAY,IAAI,WAAM,MAAM,CAAC,CAAA;AAC7B,uBAAmB,UAAU,CAAC,CAAA;AAE9B;IAIE,oBAAmB,MAAM,EAAE,UAAU;QACnC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEO,mCAAc,GAAtB;QACE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU,MAAM;YAC7E,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;YAC/E,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,CAAA;YACpF,CAAC;QACH,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IACrD,CAAC;IAEO,+BAAU,GAAlB;QACE,EAAE,CAAC,CAAC,gBAAM,CAAC,KAAK,CAAC;YAAC,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;IACtD,CAAC;IAEO,6BAAQ,GAAhB,UAAiB,GAAG;QAClB,EAAE,CAAC,CAAC,gBAAM,CAAC,KAAK,CAAC;YAAC,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IAChD,CAAC;IAES,oCAAe,GAAzB,UAA0B,KAAK,IAAG,CAAC;IAEzB,4BAAO,GAAjB;QACE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC5C,CAAC;IACH,iBAAC;AAAD,CAjCA,AAiCC,IAAA;AAED;kBAAe,UAAU,CAAC","file":"BaseKnexRepository.js","sourcesContent":["import * as knex from 'knex';\nimport config from './config';\n\nclass Repository {\n  private config;\n  private collection;\n\n  public constructor(config, collection) {\n    this.config = config;\n    this.collection = collection;\n    this.constructTable();\n  }\n\n  private constructTable() {\n    return knex(this.config).schema.hasTable(this.collection).then(function (exists) {\n      if (exists) {\n        return knex(this.config).schema.table(this.collection, this.constructSchema);\n      } else {\n        return knex(this.config).schema.createTable(this.collection, this.constructSchema)\n      }\n    }.bind(this)).then(this.logSuccess, this.logError);\n  }\n\n  private logSuccess() {\n    if (config.debug) console.log('Success', arguments);\n  }\n\n  private logError(err) {\n    if (config.debug) console.error('Error', err);\n  }\n\n  protected constructSchema(table) {}\n\n  protected connect() {\n    return knex(this.config)(this.collection);\n  }\n}\n\nexport default Repository;"],"sourceRoot":"/source/"}