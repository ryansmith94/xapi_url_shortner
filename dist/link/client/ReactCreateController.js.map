{"version":3,"sources":["link/client/ReactCreateController.ts"],"names":[],"mappings":";;;;;;AAAA,IAAY,KAAK,WAAM,OAAO,CAAC,CAAA;AAE/B,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;AACpB;IAAwB,6BAAyB;IAAjD;QAAwB,8BAAyB;QACxC,UAAK,GAAG;YACb,UAAU,EAAE,EAAE;YACd,KAAK,EAAE,KAAK;SACb,CAAC;IAkEJ,CAAC;IAjES,gCAAY,GAApB,UAAqB,UAAkC;QAAlC,0BAAkC,GAAlC,aAAa,IAAI,CAAC,KAAK,CAAC,UAAU;QACrD,UAAU,GAAG,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;QAClE,MAAM,CAAC,UAAU,IAAI,SAAS,CAAC;IACjC,CAAC;IACO,gCAAY,GAApB,UAAqB,QAAQ,EAAE,UAAU;QAAzC,iBAUC;QATC,IAAI,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QACnD,EAAE,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACnC,QAAQ,GAAG,SAAS,GAAG,QAAQ,CAAC;QAClC,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC,IAAI,CAAC;YAC7D,KAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;QACjC,CAAC,EAAE;YACD,KAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;IACL,CAAC;IACO,iCAAa,GAArB,UAAsB,KAAK;QACzB,IAAI,UAAU,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACrC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAC3B,IAAI,CAAC,KAAK,CAAC,QAAQ,EACnB,UAAU,CACX,CAAC,IAAI,CAAC;YACL,IAAI,CAAC,QAAQ,CAAC,EAAC,UAAU,EAAE,EAAE,EAAC,CAAC,CAAC;QAClC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,UAAU,GAAG;YACzB,KAAK,CAAC,GAAG,CAAC,CAAC;QACb,CAAC,CAAC,CAAC;QACH,KAAK,CAAC,cAAc,EAAE,CAAC;IACzB,CAAC;IACO,uCAAmB,GAA3B,UAA4B,KAAK;QAC/B,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC/C,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IAC/D,CAAC;IACO,yCAAqB,GAA7B,UAA8B,KAAK;QACjC,IAAI,CAAC,QAAQ,CAAC,EAAC,UAAU,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK,EAAC,CAAC,CAAC;QAChD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC7D,CAAC;IACO,oCAAgB,GAAxB,cAA4B,CAAC;IACtB,qCAAiB,GAAxB;QACE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACzE,CAAC;IACM,wCAAoB,GAA3B;QACE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC5E,CAAC;IACM,0BAAM,GAAb;QACE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,EAAC,SAAS,EAAE,aAAa,EAAE,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,EAAC,SAAS,EAAE,QAAQ,EAAC,EAAC,EAAE;YACjH,GAAG,CAAC,KAAK,CAAC;gBACR,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ;gBAC1B,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC;gBAC7C,IAAI,EAAE,MAAM;gBACZ,WAAW,EAAE,UAAU;gBACvB,SAAS,EAAE,uBAAuB;aACnC,CAAC;YACF,GAAG,CAAC,KAAK,CAAC;gBACR,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU;gBAC5B,QAAQ,EAAE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC;gBAC/C,IAAI,EAAE,MAAM;gBACZ,WAAW,EAAE,uBAAuB;gBACpC,SAAS,EAAE,yBAAyB;aACrC,CAAC;YACF,GAAG,CAAC,MAAM,CAAC;gBACT,IAAI,EAAE,QAAQ;gBACd,SAAS,EAAE,iBAAiB;gBAC5B,QAAQ,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK;aAC5B,EAAE,CAAC,SAAS,CAAC,CAAC;SAChB,CAAC,CAAC;IACL,CAAC;IACH,gBAAC;AAAD,CAtEA,AAsEC,CAtEuB,KAAK,CAAC,SAAS,GAsEtC;AAED;kBAAe,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC","file":"link/client/ReactCreateController.js","sourcesContent":["import * as React from 'react';\n\nvar dom = React.DOM;\nclass Component extends React.Component<any, any> {\n  public state = {\n    custom_url: '',\n    valid: false\n  };\n  private getCustomUrl(custom_url = this.state.custom_url) {\n    custom_url = custom_url.split(document.location.host + '/').pop();\n    return custom_url || undefined;\n  }\n  private validateLink(long_url, custom_url) {\n    let mod_custom_url = this.getCustomUrl(custom_url);\n    if (long_url.indexOf('://') === -1) {\n      long_url = 'http://' + long_url;\n    }\n    this.props.service.validateLink(long_url, mod_custom_url).then(() => {\n      this.setState({ valid: true });\n    }, () => {\n      this.setState({ valid: false });\n    });\n  }\n  private handleShorten(event) {\n    let custom_url = this.getCustomUrl();\n    this.props.service.createLink(\n      this.props.long_url,\n      custom_url\n    ).then(function () {\n      this.setState({custom_url: ''});\n    }.bind(this), function (err) {\n      alert(err);\n    });\n    event.preventDefault();\n  }\n  private handleLongUrlChange(event) {\n    this.props.onLongUrlChange(event.target.value);\n    this.validateLink(event.target.value, this.state.custom_url);\n  }\n  private handleCustomUrlChange(event) {\n    this.setState({custom_url: event.target.value});\n    this.validateLink(this.props.long_url, event.target.value);\n  }\n  private handleDataChange() {}\n  public componentDidMount() {\n    this.props.service.addChangeListener(this.handleDataChange.bind(this));\n  }\n  public componentWillUnmount() {\n    this.props.service.removeChangeListener(this.handleDataChange.bind(this));\n  }\n  public render() {\n    return dom.form({className: 'link_create', onSubmit: this.handleShorten.bind(this), style: {textAlign: 'center'}}, [\n      dom.input({\n        value: this.props.long_url,\n        onChange: this.handleLongUrlChange.bind(this),\n        type: 'text',\n        placeholder: 'Long URL',\n        className: 'long_url form-control'\n      }),\n      dom.input({\n        value: this.state.custom_url,\n        onChange: this.handleCustomUrlChange.bind(this),\n        type: 'text',\n        placeholder: 'Custom URL (Optional)',\n        className: 'custom_url form-control'\n      }),\n      dom.button({\n        type: 'submit',\n        className: 'btn btn-success',\n        disabled: !this.state.valid\n      }, ['Shorten'])\n    ]);\n  }\n}\n\nexport default React.createFactory(Component);"],"sourceRoot":"/source/"}