{"version":3,"sources":["link/client/ReactCreateController.ts"],"names":[],"mappings":"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","file":"link/client/ReactCreateController.js","sourcesContent":["import * as React from 'react';\n\nvar dom = React.DOM;\nclass Component extends React.Component<any, any> {\n  public state = {\n    custom_url: '',\n    valid: false\n  };\n\n  /**\n   * Ensures that a custom URL is formatted correctly.\n   * @param {string} custom_url The custom URL to format.\n   */\n  private formatCustomUrl(custom_url: string = this.state.custom_url) {\n    custom_url = custom_url.split(document.location.host + '/').pop();\n    return custom_url || undefined;\n  }\n\n  /**\n   * Validates a link.\n   * @param {string} long_url\n   * @param {string} custom_url\n   */\n  private validateLink(long_url: string, custom_url: string) {\n    let mod_custom_url = this.formatCustomUrl(custom_url);\n    if (long_url.indexOf('://') === -1) {\n      long_url = 'http://' + long_url;\n    }\n    this.props.service.validateLink(long_url, mod_custom_url).then(() => {\n      this.setState({ valid: true });\n    }, () => {\n      this.setState({ valid: false });\n    });\n  }\n\n  /**\n   * Shortens a link.\n   * @param {any} event\n   */\n  private handleShorten(event: any) {\n    let custom_url = this.formatCustomUrl();\n    this.props.service.createLink(\n      this.props.long_url,\n      custom_url\n    ).then(function () {\n      this.setState({custom_url: ''});\n    }.bind(this), function (err) {\n      alert(err);\n    });\n    event.preventDefault();\n  }\n\n  /**\n   * Changes the long URL.\n   * @param {any} event\n   */\n  private handleLongUrlChange(event: any) {\n    this.props.onLongUrlChange(event.target.value);\n    this.validateLink(event.target.value, this.state.custom_url);\n  }\n\n  /**\n   * Changes the custom URL.\n   * @param {any} event\n   */\n  private handleCustomUrlChange(event: any) {\n    this.setState({custom_url: event.target.value});\n    this.validateLink(this.props.long_url, event.target.value);\n  }\n\n  /**\n   * Renders the controller.\n   */\n  public render() {\n    return dom.form({className: 'link_create', onSubmit: this.handleShorten.bind(this), style: {textAlign: 'center'}}, [\n      dom.input({\n        value: this.props.long_url,\n        onChange: this.handleLongUrlChange.bind(this),\n        type: 'text',\n        placeholder: 'Long URL',\n        className: 'long_url form-control'\n      }),\n      dom.input({\n        value: this.state.custom_url,\n        onChange: this.handleCustomUrlChange.bind(this),\n        type: 'text',\n        placeholder: 'Custom URL (Optional)',\n        className: 'custom_url form-control'\n      }),\n      dom.button({\n        type: 'submit',\n        className: 'btn btn-success',\n        disabled: !this.state.valid\n      }, ['Shorten'])\n    ]);\n  }\n}\n\nexport default React.createFactory(Component);"],"sourceRoot":"/source/"}