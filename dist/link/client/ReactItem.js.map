{"version":3,"sources":["link/client/ReactItem.ts"],"names":[],"mappings":"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","file":"link/client/ReactItem.js","sourcesContent":["import * as React from 'react';\nimport copy from '../../copyToClipboard';\n\nconst ENTER_KEY = 13;\nconst ESCAPE_KEY = 27;\n\nvar dom = React.DOM;\nclass Component extends React.Component<any, any> {\n  public state = {\n    long_url: this.props.long_url,\n    editing: false\n  }\n  private getFavicon(url): string {\n    var match = (url || '').match(/:\\/\\/(.[^/]+)/);\n    if (match && match.length > 0) {\n      return 'http://'+match[1]+'/favicon.ico';\n    } else {\n      return '';\n    }\n  }\n  private handleDelete(): void {\n    if (!confirm('Are you sure you want to delete this link?')) return;\n    this.props.onDelete(this.props.id);\n  }\n  private handleLongUrlChange(e: React.FormEvent): void {\n    let input: any = event.target;\n    this.setState({ long_url: input.value });\n  }\n  private handleSave(): void {\n    this.props.onLongUrlChange(this.props.id, this.state.long_url);\n    this.setState({ editing: false });\n  }\n  private handleCancel(): void {\n    this.setState({ title: this.props.long_url, editing: false });\n  }\n  private handleKeyDown(event: React.KeyboardEvent): void {\n    if (event.keyCode === ESCAPE_KEY) {\n      this.handleCancel();\n    } else if (event.keyCode === ENTER_KEY) {\n      this.handleSave();\n    }\n  }\n  private handleCopy(event): void {\n    copy(this.getShortUrl());\n    console.log(this.getShortUrl());\n  }\n  private handleToggleEdit(): void {\n    this.setState({ editing: !this.state.editing });\n  }\n  private getShortUrl(): string {\n    return location.protocol + '//' + location.host + '/' + this.props.short_url;\n  }\n  render() {\n    let location = document.location;\n    let short_url = this.getShortUrl();\n\n    return dom.div({\n      className: 'link_item clearfix',\n      onDoubleClick: this.props.editable ? this.handleToggleEdit.bind(this) : null\n    }, [\n      dom.span({className: 'col col-xs-1 link_icon_col'}, [\n        dom.img({className: 'link_icon', src: this.getFavicon(this.props.long_url)}),\n      ]),\n      dom.span({className: 'col col-xs-5 link_info_col'}, [\n        dom.div({}, [dom.a({className: 'short_url text-primary', href: short_url}, [short_url])]),\n        dom.div({}, [\n          this.state.editing ? dom.input({\n            value: this.state.long_url,\n            onChange: this.handleLongUrlChange.bind(this),\n            onBlur: this.handleSave.bind(this),\n            onKeyDown: this.handleKeyDown.bind(this),\n            autoFocus: true\n          }) : dom.a({\n            className: 'long_url small text-muted',\n            href: this.props.long_url\n          }, [this.props.long_url])\n        ])\n      ]),\n      dom.span({className: 'col col-xs-5 link_action_col pull-right'}, [\n        dom.span({className: 'copy btn', onClick: this.handleCopy.bind(this)}, [\n          dom.span({className: 'glyphicon glyphicon-copy'})\n        ]),\n        ... (this.props.editable ? [\n          dom.span({className: 'edit btn', onClick: this.handleToggleEdit.bind(this)}, [\n            dom.span({className: 'glyphicon glyphicon-pencil'})\n          ]),\n          dom.span({className: 'delete btn', onClick: this.handleDelete.bind(this)}, [\n            dom.span({className: 'glyphicon glyphicon-remove'})\n          ])\n        ] : [])\n      ]) \n    ]);\n  }\n}\n\nexport default React.createFactory(Component);"],"sourceRoot":"/source/"}